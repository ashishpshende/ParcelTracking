{"version":3,"file":"src_app_pages_public_login_login_module_ts.js","mappings":"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","sources":["./src/app/pages/public/login/login-routing.module.ts","./src/app/pages/public/login/login.module.ts","./src/app/pages/public/login/login.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { LoginPage } from './login.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: LoginPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class LoginPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { LoginPageRoutingModule } from './login-routing.module';\r\n\r\nimport { LoginPage } from './login.page';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    IonicModule,   \r\n    LoginPageRoutingModule,\r\n    TranslateModule.forChild()\r\n  ],\r\n  declarations: [LoginPage]\r\n})\r\nexport class LoginPageModule {}\r\n","import { AfterViewInit, Component, OnInit } from '@angular/core';\r\nimport { FormBuilder } from '@angular/forms';\r\nimport { ToastController, AlertController, LoadingController, Platform } from '@ionic/angular';\r\nimport { NavigationExtras, Router } from '@angular/router';\r\n\r\nimport { LocalStorageService } from 'src/app/services/localStorage/local-storage.service';\r\nimport { UserService } from 'src/app/services/user/user.service';\r\nimport { LanguageService } from 'src/app/services/language/language.service';\r\nimport { AuthenticationService } from 'src/app/services/Authentication/authentication.service';\r\nimport { NgEventBus } from 'ng-event-bus';\r\n\r\n\r\n\r\n\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.page.html',\r\n  styleUrls: ['./login.page.scss'],\r\n})\r\nexport class LoginPage implements OnInit,AfterViewInit {\r\n  userName: string;\r\n  password: string;\r\n  showUsernameValidationMessage: boolean;\r\n  showPasswordValidationMessage: boolean;\r\n  frontendValidation: boolean;\r\n  backendValidation: boolean;\r\n  public appTitle: String;\r\n  resetRequired: boolean;\r\n  loading: any;\r\n\r\n  public user = null;\r\n  constructor(\r\n    public toastCtrl: ToastController,\r\n    public alertController: AlertController,\r\n    private router: Router,\r\n    public loadingController: LoadingController,\r\n    private userService: UserService,\r\n    private languageService: LanguageService  ) {\r\n\r\n\r\n    this.showUsernameValidationMessage = false;\r\n    this.showPasswordValidationMessage = false;\r\n  }\r\n  ngAfterViewInit(): void {\r\n    this.userName =  \"admin\";//\"\";\r\n    this.password =  \"password\";//\"\";\r\n  }\r\n\r\n  ionViewWillEnter() {\r\n\r\n  }\r\n  validate() {\r\n    var result = true;\r\n    if (this.userName == null || this.userName == '') {\r\n\r\n      this.showUsernameValidationMessage = true;\r\n      result = false;\r\n    }\r\n    if (this.password == null || this.password == '') {\r\n      this.showPasswordValidationMessage = true;\r\n      result = false;\r\n    }\r\n    return result;\r\n  }\r\n  async ngOnInit() {\r\n    this.resetRequired = false;\r\n  }\r\n\r\n  async presentLoading(loading) {\r\n    await loading.present();\r\n  }\r\n\r\n\r\n  goToRegister() {\r\n    let navigationExtras: NavigationExtras = {\r\n      queryParams: {\r\n        ts: new Date().getTime()\r\n      }\r\n    };\r\n    this.router.navigate(['/register'],navigationExtras);\r\n  }\r\n\r\n  goToHome() {\r\n    let navigationExtras: NavigationExtras = {\r\n      queryParams: {\r\n        ts: new Date().getTime()\r\n      }\r\n    };\r\n    this.router.navigate(['/home'],navigationExtras);\r\n  }\r\n\r\n  //Click Events\r\n  forgotPasswordLinkClicked() {\r\n    let navigationExtras: NavigationExtras = {\r\n      queryParams: {\r\n        ts: new Date().getTime()\r\n      }\r\n    };\r\n    this.router.navigate(['/forgot-password'],navigationExtras)\r\n  }\r\n  forgotUserLinkClicked() {\r\n    let navigationExtras: NavigationExtras = {\r\n      queryParams: {\r\n        ts: new Date().getTime()\r\n      }\r\n    };\r\n    this.router.navigate(['/forgot-username'],navigationExtras)\r\n  }\r\n  async loginButtonClicked() {\r\n    this.backendValidation = false;\r\n    if (this.validate()) {\r\n      this.loading = await this.loadingController.create({\r\n        message:  this.languageService.translate('LOGIN.SIGN_IN_PROGRESS_MESSAGE'),\r\n        duration: 10000,\r\n      });\r\n      this.loading.present();\r\n      this.userService.login(this.userName, this.password, async () => {\r\n        this.backendValidation = true;\r\n        this.loading.dismiss();\r\n        let navigationExtras: NavigationExtras = {\r\n          queryParams: {\r\n            ts: new Date().getTime()\r\n          }\r\n        };\r\n        this.router.navigate(['/home'],navigationExtras);\r\n      },\r\n        failure => {\r\n          this.loading.dismiss();\r\n          this.backendValidation = false;\r\n          switch (failure) {\r\n            case \"INVALID_CREDENTAILS\":\r\n              this.resetRequired = false;\r\n              this.presentAlert(this.languageService.translate('LOGIN.INVALID_CREDENTIALS_ERROR_TITLE'),this.languageService.translate('LOGIN.ERROR_INVALID_CREDENTIALS_MESSAGE'));\r\n              break;\r\n            case \"INACTIVE_USER\":\r\n              this.resetRequired = false;\r\n              this.presentAlert(this.languageService.translate('LOGIN.INACTIVE_ACCOUNT_ERROR_TITLE'),this.languageService.translate('LOGIN.ERROR_INACTIVE_ACCOUNT_MESSAGE'));\r\n              break;\r\n            case \"SUSPENDED_USER\":\r\n              this.resetRequired = false;\r\n              this.presentAlert(this.languageService.translate('LOGIN.SUSPENDED_ACCOUNT_ERROR_TITLE'),this.languageService.translate('LOGIN.ERROR_SUSPENDED_ACCOUNT_MESSAGE'));\r\n              break;\r\n            case \"RESET_REQUIRED\":\r\n              this.resetRequired = true;\r\n              this.presentAlert(this.languageService.translate('LOGIN.PASSWORD_RESET_REQUIRED_ERROR_TITLE'),this.languageService.translate('LOGIN.PASSWORD_RESET_REQUIRED_ACCOUNT_MESSAGE'));\r\n              break;\r\n          }\r\n\r\n        });\r\n    }\r\n    else {\r\n\r\n    }\r\n  }\r\n  signupLinkClicked() {\r\n    let navigationExtras: NavigationExtras = {\r\n      queryParams: {\r\n        ts: new Date().getTime()\r\n      }\r\n    };\r\n    this.router.navigate(['/register'],navigationExtras)\r\n  }\r\n  languageLinkClicked() {\r\n\r\n    this.languageService.presentLanguageSelctionMenu(()=>{});\r\n  }\r\n\r\n\r\n  //Alerts\r\n  async presentAlert(headerTitle = this.languageService.translate('LOGIN.ERROR_ALERT_TITLE'), message = this.languageService.translate('LOGIN.ERROR_INVALID_CREDENTIALS_MESSAGE')) {\r\n    const alert = await this.alertController.create({\r\n      cssClass: 'my-custom-class',\r\n      header: headerTitle,\r\n      subHeader: \"\",\r\n      message: message,\r\n      buttons: [\r\n         {\r\n          text: this.languageService.translate('BUTTONS.OK'),\r\n          handler: () => {\r\n            if(this.resetRequired)\r\n            {\r\n              this.userService.lastRoute = \"login\";\r\n              let navigationExtras: NavigationExtras = {\r\n                queryParams: {\r\n                  ts: new Date().getTime()\r\n                }\r\n              };\r\n              this.router.navigate(['reset-password'],navigationExtras);\r\n            }\r\n          }\r\n        }]\r\n    });\r\n\r\n    await alert.present();\r\n\r\n    const { role } = await alert.onDidDismiss();\r\n  }\r\n\r\n}\r\n"],"names":["Component","ToastController","AlertController","LoadingController","Router","UserService","LanguageService","LoginPage","constructor","toastCtrl","alertController","router","loadingController","userService","languageService","showUsernameValidationMessage","showPasswordValidationMessage","ngAfterViewInit","userName","password","ionViewWillEnter","validate","result","ngOnInit","resetRequired","presentLoading","loading","present","goToRegister","navigationExtras","queryParams","ts","Date","getTime","navigate","goToHome","forgotPasswordLinkClicked","forgotUserLinkClicked","loginButtonClicked","backendValidation","create","message","translate","duration","login","dismiss","failure","presentAlert","signupLinkClicked","languageLinkClicked","presentLanguageSelctionMenu","headerTitle","alert","cssClass","header","subHeader","buttons","text","handler","lastRoute","role","onDidDismiss","selector","template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}