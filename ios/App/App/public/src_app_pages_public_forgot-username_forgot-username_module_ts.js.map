{"version":3,"file":"src_app_pages_public_forgot-username_forgot-username_module_ts.js","mappings":"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","sources":["./src/app/pages/public/forgot-username/forgot-username-routing.module.ts","./src/app/pages/public/forgot-username/forgot-username.module.ts","./src/app/pages/public/forgot-username/forgot-username.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { ForgotUsernamePage } from './forgot-username.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ForgotUsernamePage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class ForgotUsernamePageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { ForgotUsernamePageRoutingModule } from './forgot-username-routing.module';\r\n\r\nimport { ForgotUsernamePage } from './forgot-username.page';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    ReactiveFormsModule,\r\n    ForgotUsernamePageRoutingModule,\r\n    TranslateModule.forChild()\r\n  ],\r\n  declarations: [ForgotUsernamePage]\r\n})\r\nexport class ForgotUsernamePageModule {}\r\n","/* eslint-disable max-len */\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { NavigationExtras, Router } from '@angular/router';\r\nimport { LoadingController, AlertController } from '@ionic/angular';\r\nimport { User } from 'src/app/models/user';\r\nimport { HelperService } from 'src/app/services/helpers/helper-service';\r\nimport { LanguageService } from 'src/app/services/language/language.service';\r\nimport { UserService } from 'src/app/services/user/user.service';\r\n\r\n@Component({\r\n  selector: 'app-forgot-username',\r\n  templateUrl: './forgot-username.page.html',\r\n  styleUrls: ['./forgot-username.page.scss'],\r\n})\r\nexport class ForgotUsernamePage implements OnInit {\r\n  public userEmailValidationMessage:string=\"\";\r\n  public userEmail:string=\"\";\r\n  public enableRequestButton:boolean=false;\r\n  private localUser:User;\r\n  private loading:any;\r\n  private allowClose: boolean= false;\r\n  constructor(\r\n    private router: Router,\r\n    private alertController: AlertController,\r\n    private loadingController:LoadingController,\r\n    private userService:UserService,\r\n    private languageService:LanguageService,\r\n    public loadingCtrl: LoadingController,\r\n  ) {\r\n    this.localUser = new User(JSON.parse(\"{}\"));\r\n    this.userEmail = \"\"\r\n\r\n  }\r\n\r\n  ionViewWillEnter() {\r\n  }\r\n\r\n  ngOnInit() {\r\n\r\n\r\n  }\r\n  emailTextChanged(){\r\n    var result =    this.enableRequestButton =  HelperService.validateEmail(this.userEmail);\r\n    if(this.userEmail.length>0 && !result)\r\n    {\r\n      this.userEmailValidationMessage = this.languageService.translate('FORGOT_USER_NAME_PAGE.EMAIL_SYNTAX_VALIDATING_MESSAGE');\r\n    }\r\n    else\r\n    {\r\n      this.userEmailValidationMessage = \"\";\r\n    }\r\n    return result;\r\n  }\r\n  async RequestUserNameButtonClicked() {\r\n    const loader = await this.loadingCtrl.create({\r\n      message:  this.languageService.translate('FORGOT_USER_NAME_PAGE.VALIDATING_MESSAGE'),\r\n      duration: 3000\r\n    });\r\n    loader.present();\r\n      this.userService.getUserByEmail(this.userEmail, async response => {\r\n        if(response == null|| response === undefined  || response.results.length === 0)\r\n        {\r\n          loader.dismiss();\r\n            this.presentAlert(this.languageService.translate('FORGOT_USER_NAME_PAGE.EMAIL_NOT_SENT_TITLE'),this.languageService.translate('FORGOT_USER_NAME_PAGE.INVALID_DETAILS_MESSAGE'));\r\n        }\r\n        else\r\n        {\r\n          loader.dismiss();\r\n          this.localUser = response.result[0];\r\n          this.sendEmail();\r\n        }\r\n\r\n      },\r\n      failure => {\r\n        this.presentAlert('FORGOT_USER_NAME_PAGE.EMAIL_NOT_SENT_TITLE','FORGOT_USER_NAME_PAGE.VALIDATION_FAILED_MESSAGE')\r\n\r\n      });\r\n\r\n      // loader.onWillDismiss().then(() => {\r\n      //   let navigationExtras: NavigationExtras = {\r\n      //     queryParams: {\r\n      //       ts: new Date().getMilliseconds()\r\n      //     }\r\n      //   };\r\n      //   this.navCtrl.navigateRoot('/login',navigationExtras);\r\n      // });\r\n  }\r\n  async sendEmail()\r\n  {\r\n    this.loading = await this.loadingController.create({\r\n      message:  this.languageService.translate('FORGOT_USER_NAME_PAGE.EMAIL_SENDING_MESSAGE'),\r\n      duration: 2000,\r\n    });\r\n    this.loading.present();\r\n    this.userService.sendForgotUserEmail(this.localUser.FirstName + ' '+ this.localUser.LastName,this.localUser.Email,this.localUser.UserName, async response => {\r\n      switch(response){\r\n        case 'sent':\r\n          this.presentAlert(this.languageService.translate('FORGOT_USER_NAME_PAGE.EMAIL_SENT_TITLE'), this.languageService.translate('FORGOT_USER_NAME_PAGE.EMAIL_SENT_MESSAGE'));\r\n          break;\r\n        default:\r\n          this.presentAlert(this.languageService.translate('FORGOT_USER_NAME_PAGE.EMAIL_NOT_SENT_TITLE'), this.languageService.translate('FORGOT_USER_NAME_PAGE.EMAIL_EXHAUSTED'));\r\n          break;\r\n      }\r\n\r\n      this.allowClose =true;\r\n    },\r\n    failure => {\r\n      this.allowClose =false;\r\n      this.presentAlert(this.languageService.translate(\"FORGOT_USER_NAME_PAGE.VALIDATION_FAILED_MESSAGE\"),this.languageService.translate(\"FORGOT_USER_NAME_PAGE.VALIDATION_FAILED_MESSAGE\"))\r\n\r\n    });\r\n  }\r\n  // // //\r\n  goToLogin() {\r\n    this.router.navigate(['/']);\r\n  }\r\n  //Alerts\r\n  async presentAlert(headerTitle = this.languageService.translate('FORGOT_USER_NAME_PAGE.VALIDATION_FAILED_TITLE'), message = this.languageService.translate('LOGIN.ERROR_INVALID_CREDENTIALS_MESSAGE')) {\r\n    const alert = await this.alertController.create({\r\n      cssClass: 'my-custom-class',\r\n      header: headerTitle,\r\n      subHeader: \"\",\r\n      message: message,\r\n      buttons: [\r\n         {\r\n          text: this.languageService.translate('BUTTONS.OK'),\r\n          handler: data => {\r\n            if(this.allowClose)\r\n            {\r\n              let navigationExtras: NavigationExtras = {\r\n                queryParams: {\r\n                  ts: new Date().getMilliseconds()\r\n                }\r\n              };\r\n              this.router.navigate(['/login'],navigationExtras);\r\n            }\r\n          }\r\n        }]\r\n    });\r\n\r\n    await alert.present();\r\n\r\n    const { role } = await alert.onDidDismiss();\r\n  }\r\n\r\n}\r\n"],"names":["Component","Router","LoadingController","AlertController","User","HelperService","LanguageService","UserService","ForgotUsernamePage","constructor","router","alertController","loadingController","userService","languageService","loadingCtrl","localUser","JSON","parse","userEmail","ionViewWillEnter","ngOnInit","emailTextChanged","result","enableRequestButton","validateEmail","length","userEmailValidationMessage","translate","RequestUserNameButtonClicked","loader","create","message","duration","present","getUserByEmail","response","undefined","dismiss","presentAlert","sendEmail","failure","loading","sendForgotUserEmail","FirstName","LastName","Email","UserName","allowClose","goToLogin","navigate","headerTitle","alert","cssClass","header","subHeader","buttons","text","handler","data","navigationExtras","queryParams","ts","Date","getMilliseconds","role","onDidDismiss","selector","template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}